<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpine.js Playground - Magic Property Access in JavaScript</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@1.x.x/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@2.x.x/dist/alpine.min.js"
      defer
    ></script>
  </head>

  <body class="flex flex-row">
    <div
      x-data="page()"
      x-init="init({ $el, $refs, $dispatch, $nextTick })"
      class="w-1/3 flex flex-col p-4"
      data-reflect-root
    >
      <h2 class="text-lg font-md mb-16">Demo</h2>
      <button
        @click="hello()"
        class="mt-32 w-2/3 justify-center flex bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
      >
        Do
      </button>
      <label class="block">Output: "<span x-text="output"></span>"</label>
      <script>
        function page() {
          return {
            output: "",
            init({ $el, $refs, $dispatch, $nextTick }) {
              // $el, $refs, $dispatch, $nextTick are
              // **not** defined in x-init handler
              console.log($dispatch());
            },
            hello() {
              // $el, $refs, $dispatch, $nextTick are
              // defined in other functions
              this.$nextTick();
            }
          };
        }
      </script>
    </div>

    <div
      x-data="reflect()"
      data-reflect-ignore
      class="w-2/3 flex flex-col overflow-scroll"
    >
      <h2>Code</h2>
      <button
        @click="toggleShowClass()"
        class="inline-block w-48 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
      >
        <template x-if="showClass">
          <span>Hide classes</span>
        </template>
        <template x-if="!showClass"> <span>Show classes</span></template>
      </button>
      <pre><code class="w-full inline-block" x-text="content()"></code></pre>
      <script src="./reflect.js"></script>
    </div>
  </body>
</html>
